//Добавил РГ-Софт - Пронин Иван
Перем мУдалятьДвижения;
//Конец добавления

Процедура ОбработкаПроведения(Отказ, Режим)
	
	//Добавил РГ-Софт - Пронин Иван
	Если мУдалятьДвижения Тогда
		ОбщегоНазначения.УдалитьДвиженияРегистратора(ЭтотОбъект, Отказ,, Истина);
	КонецЕсли;
	//Конец добавления
	
	//{{__КОНСТРУКТОР_ДВИЖЕНИЙ_РЕГИСТРОВ
	// This fragment was built by the wizard.
	// Warning! All manually made changes will be lost next time you use the wizard.
	Если КонецПериода = неопределено тогда
		сообщить("Не указана дата списания!");
		отказ = истина;
		возврат
	КонецЕсли;
	Для Каждого ТекСтрокаСостав Из Состав Цикл
		// register ИмпортМенеджмент Расход
		Движение = Движения.ИмпортМенеджмент.Добавить();
		Движение.ВидДвижения = ВидДвиженияНакопления.Расход;
		Движение.Период = Дата;
		Движение.ГТД = ТекСтрокаСостав.ГТД;
		Движение.AU = ТекСтрокаСостав.AU;
		Движение.СчетГААП = ТекСтрокаСостав.СчетГААП;
		Движение.Основание = ТекСтрокаСостав.Основание;
		Движение.ПериодLawson = ТекСтрокаСостав.ПериодВЛоусоне;
		Движение.BORG = ТекСтрокаСостав.BORG;
		Движение.Invoices = ТекСтрокаСостав.Invoices;
		Движение.POs = ТекСтрокаСостав.POs;
		Движение.Валюта = ТекСтрокаСостав.Валюта;
		Движение.Поставщик = ТекСтрокаСостав.Поставщик;
		Движение.СуммаПошлин = ТекСтрокаСостав.СуммаПошлин;
		Движение.ПроцентПошлин = ТекСтрокаСостав.ПроцентПошлин;
		Движение.СуммаНДС = ТекСтрокаСостав.СуммаНДС;
		Движение.ОбщаяСуммаТаможенныхПлатежей = ТекСтрокаСостав.ОбщаяСуммаТаможенныхПлатежей;
		//RG-Soft_IvanovAnton
		Движение.ActivityCode = ТекСтрокаСостав.ActivityCode;
	КонецЦикла;
	// writing register movements
	Движения.ИмпортМенеджмент.Записать();
	//}}__КОНСТРУКТОР_ДВИЖЕНИЙ_РЕГИСТРОВ
КонецПроцедуры

//Добавил РГ-Софт - Пронин Иван
Процедура ОбработкаУдаленияПроведения(Отказ)
	
	ОбщегоНазначения.УдалитьДвиженияРегистратора(ЭтотОбъект, Отказ,, Истина);
	
КонецПроцедуры

Процедура ПередЗаписью(Отказ, РежимЗаписи, РежимПроведения)
	
	
	//Добавил РГ-Софт - Пронин Иван
	мУдалятьДвижения = НЕ ЭтоНовый();
	//Конец добавления
КонецПроцедуры


