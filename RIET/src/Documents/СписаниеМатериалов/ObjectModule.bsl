
Процедура Печать(флаг) Экспорт
	состав.Сортировать("AU");
	ТабДок = Новый ТабличныйДокумент;
	Макет = Документы.СписаниеМатериалов.ПолучитьМакет("Печать");
	ОбластьСтроки = Макет.ПолучитьОбласть("Состав");
	ОбластьПодвал = Макет.ПолучитьОбласть("Подвал");
	ы=1;
	ПредАУ = 0;
	Для Каждого ТекСтрокаСостав Из Состав Цикл
		Если предАУ <> ТекСтрокаСостав.AU тогда
			Если (Флаг = 0) или (ПредАУ = 0) и (Флаг = 1) тогда
				Если ПредАУ <> 0 тогда
					ТабДок.Вывести(ОбластьПодвал);
				КонецЕсли;
				ТабДок.ВывестиГоризонтальныйРазделительСтраниц();
				// Заголовок
				Область = Макет.ПолучитьОбласть("Заголовок");
				Область.Параметры.Организация = УправлениеПользователями.ПолучитьЗначениеПоУмолчанию(ПараметрыСеанса.ТекущийПользователь, "ОсновнаяОрганизация");
				ТабДок.Вывести(Область);
				// Шапка
				Область = Макет.ПолучитьОбласть("Шапка");
				Если Флаг = 0 тогда
					Область.Параметры.Номер = "" + Номер + "/" + ТекСтрокаСостав.AU.Сегмент;
				иначе
					Область.Параметры.Номер = Номер;
				КонецЕсли;
				Область.Параметры.Дата = Дата;
				Если Флаг = 0 тогда
					Область.Параметры.AU = ТекСтрокаСостав.AU;
					Область.Параметры.Сегмент = ТекСтрокаСостав.AU.Сегмент;
				иначе 
					Область.Параметры.AU = "Все";
					Область.Параметры.Сегмент = "Все";
				КонецЕсли;
				Область.Параметры.НалРегистрация = Подразделение.Наименование;
				Область.Параметры.ДатаГТДНач = ДатаГТДНач;
				Область.Параметры.ДатаГТДКон = ДатаГТДКон;
				ТабДок.Вывести(Область);
				// Состав
				Область = Макет.ПолучитьОбласть("СоставШапка");
				ТабДок.Вывести(Область);
				ы=1;
				предАУ = ТекСтрокаСостав.AU;
			КонецЕсли;
		КонецЕсли;
			
		ОбластьСтроки.Параметры.ы = ы;
		ОбластьСтроки.Параметры.Номенклатура = ТекСтрокаСостав.Номенклатура;
		ОбластьСтроки.Параметры.НоменклатураРус = ТекСтрокаСостав.Номенклатура.НаименованиеРусское;
		ОбластьСтроки.Параметры.Код = ТекСтрокаСостав.Номенклатура.Код;
		ОбластьСтроки.Параметры.ЕдИзм = ТекСтрокаСостав.ЕдИзм;
		ОбластьСтроки.Параметры.Количество = ТекСтрокаСостав.Количество;
		ОбластьСтроки.Параметры.Поставщик = ТекСтрокаСостав.Поставщик;
		ОбластьСтроки.Параметры.МАТО = ТекСтрокаСостав.МАТО;
		ОбластьСтроки.Параметры.Цена = ТекСтрокаСостав.Цена;
		ОбластьСтроки.Параметры.ВсегоВал = ТекСтрокаСостав.ВсегоВал;
		ОбластьСтроки.Параметры.Ваучер = ТекСтрокаСостав.Ваучер;
		//Область.Параметры.Получатель = ТекСтрокаСостав.Получатель;
		ОбластьСтроки.Параметры.НомерГТД = ТекСтрокаСостав.НомерГТД;
		ОбластьСтроки.Параметры.ДатаГТД = ТекСтрокаСостав.НомерГТД.ДатаГТД;
		ТабДок.Вывести(ОбластьСтроки);
		ы = ы + 1;
	КонецЦикла;
	
	ТабДок.Вывести(ОбластьПодвал);

	ТабДок.ОтображатьСетку = Ложь;
	ТабДок.Защита = Ложь;
	ТабДок.ТолькоПросмотр = Ложь;
	ТабДок.ОтображатьЗаголовки = Ложь;
	ТабДок.Показать();
	//}}_КОНСТРУКТОР_ПЕЧАТИ_ЭЛЕМЕНТ
КонецПроцедуры
