
&НаКлиенте
Процедура ОбработкаКоманды(ПараметрКоманды, ПараметрыВыполненияКоманды)
	
	//// { RGS ASeryakov, 17.09.2018 16:44:34 S-I-0005997
	//Stage = ОпределитьStage(ПараметрКоманды);
	//
	//Если Stage = ПредопределенноеЗначение("Перечисление.TripNonLawsonCompaniesStages.Closed") Тогда
	//	
	//	VerifiedByBillingSpecialist(ПараметрКоманды);

	//	Оповестить("ЗаписанApproval", , ПараметрКоманды);
	//	ОповеститьОбИзменении(ПараметрКоманды);
	//	
	//иначе
	//	
	//	Если РГСофтСерверПовтИспСеанс.ПолучитьПараметрСеансаShowNamesAndDescriptionsRUS()  Тогда 
	//		Сообщить("Текущий статус поставки: '"+ СокрЛП(Stage) +"'. 
	//		|Поставка может быть проверена только после закрытия!");
	//	Иначе 
	//		Сообщить("Current trip stage: '"+ СокрЛП(Stage) +"'. 
	//		|Trip can be verified only after it was closed!");
	//	КонецЕсли;

	//КонецЕсли;
	//// } RGS ASeryakov, 17.09.2018 16:44:34 S-I-0005997
КонецПроцедуры

&НаСервере
Функция ОпределитьStage(Trip)
	
	Возврат РегистрыСведений.StagesOfTripsNonLawsonCompanies.ОпределитьStage(Trip);	
	
КонецФункции
	
&НаСервере
Процедура VerifiedByBillingSpecialist(TripСсылка)
	
	
	УстановитьПривилегированныйРежим(Истина);
	
	TripОбъект = TripСсылка.ПолучитьОбъект();
	TripОбъект.VerifiedByBillingSpecialist = ТекущаяДата();
	TripОбъект.BillingSpecialist = ПараметрыСеанса.ТекущийПользователь;
	TripОбъект.Записать();
	
	УстановитьПривилегированныйРежим(Ложь);

КонецПроцедуры