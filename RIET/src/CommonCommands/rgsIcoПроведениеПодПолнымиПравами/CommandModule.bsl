
&НаКлиенте
Процедура ОбработкаКоманды(ПараметрКоманды, ПараметрыВыполненияКоманды)
	
	// попытка отмены проведения сопоставленного документа
	Ответ = ПроведениеПодПолнымиПравамиНаСервере(ПараметрКоманды);
	ПараметрыВыполненияКоманды.Источник.Прочитать();
	
	Если НЕ Ответ.Отказ Тогда
		//ПараметрыВыполненияКоманды.Источник.ТолькоПросмотр = Ложь;
		Сообщение = Новый СообщениеПользователю;
		Сообщение.Текст = "Перепроведение документа успешно завершено.";
		Сообщение.Сообщить();
	Иначе
		Сообщение = Новый СообщениеПользователю;
		Сообщение.Текст = "При перепроведении документа произошла ошибка!!!";
		Сообщение.Сообщить();
	КонецЕсли;
	
КонецПроцедуры

&НаСервере
Функция ПроведениеПодПолнымиПравамиНаСервере(Документ)
	
	Отказ = Ложь;
	ТекстОшибки = "";
	
	Если Константы.ПроводитьДокументыЧерезМодульКонтроля.Получить() Тогда
		СтруктураДанных = КонтрольПроведенияСервер.СформироватьСтруктуруИдентификацииДокументаXDTO(Документ);
		Ответ = КонтрольПроведенияСервер.ДействиеМодуляКонтроля("PostDocument", Отказ, ТекстОшибки, СтруктураДанных);
	КонецЕсли;
	
	Возврат Ответ;
	
КонецФункции

