
//////////////////////////////////////////////////////////////////
// ОБРАБОТЧИКИ СОБЫТИЙ ФОРМЫ
//////////////////////////////////////////////////////////////////

&НаСервере                                                                         
Процедура ПриСозданииНаСервере(Отказ, СтандартнаяОбработка)
	
	Если Не Параметры.Свойство("Корректировка") Тогда
		ОбщегоНазначенияКлиентСервер.СообщитьПользователю("Не указана корректировка!");
		Возврат;
	КонецЕсли;
	
	Корректировка = Параметры.Корректировка;
	Подразделение = НастройкаПравДоступа.ПолучитьАналитикуУтвержденияОбъекта(Корректировка);
		
	// Заполним таблицу исполнителей
	МассивУтверждающихПользователей = НастройкаПравДоступа.ПолучитьМассивУтверждающихПользователей(Подразделение);
	Для Каждого Исполнитель Из МассивУтверждающихПользователей Цикл
		НоваяСтрокаИсполнителей = Исполнители.Добавить();
		НоваяСтрокаИсполнителей.Исполнитель = Исполнитель;
	КонецЦикла;
	
КонецПроцедуры

&НаКлиенте
Процедура ЗапроситьУтверждениеКорректировки(Команда)
	  	
	Если СокрЛП(Основание) = "" Тогда
		ОбщегоНазначенияКлиентСервер.СообщитьПользователю("Не заполнен текст основания!");
		Возврат;
	КонецЕсли;
	
	НастройкаПравДоступа.ЗапуститьПроцессУтверждения(Корректировка, Подразделение, Основание);
	Закрыть(Истина); 		
		
КонецПроцедуры
