
Функция ПолучитьОстатокПоCustomsBond(МоментВремени, CustomsBond) Экспорт
	
	// Возвращает остаток по Customs bond
	
	Если НЕ ЗначениеЗаполнено(CustomsBond) Тогда
		ВызватьИсключение "Customs bond is empty!";
	КонецЕсли;
	
	Запрос = Новый Запрос;
	
	Запрос.УстановитьПараметр("МоментВремени", МоментВремени);
	Запрос.УстановитьПараметр("CustomsBond", CustomsBond);
	
	Запрос.Текст = 
		"ВЫБРАТЬ
		|	CustomsDepositsОстатки.SumОстаток
		|ИЗ
		|	РегистрНакопления.CustomsDeposits.Остатки(&МоментВремени, CustomsBond = &CustomsBond) КАК CustomsDepositsОстатки";
		
	Выборка = Запрос.Выполнить().Выбрать();
	Если Выборка.Следующий() Тогда
		Возврат Выборка.SumОстаток;
	Иначе
		Возврат 0;
	КонецЕсли;
	
КонецФункции
